<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Google Sign-In Example</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      background-color: #f0f0f0;
    }
    #google-signin-button {
      margin-top: 20px;
    }
    #error-message {
      color: red;
      display: none;
      margin-top: 10px;
    }
  </style>
</head>
<body>

  <div id="google-signin-container">
    <h2>Sign in with Google</h2>
    <div id="google-signin-button"></div>
    <p id="error-message"></p>
  </div>

  <!-- Google Sign-In script -->
  <script src="https://accounts.google.com/gsi/client" async defer></script>

  <script>
    window.onload = function () {
      google.accounts.id.initialize({
        client_id: "284693083284-kg8atgnkqq0sf1sl875j9ghe5in9vog0.apps.googleusercontent.com",  
        callback: handleGoogleSignIn
      });

      // Render the Google Sign-In button
      google.accounts.id.renderButton(
        document.getElementById("google-signin-button"),
        { theme: "outline", size: "large" }
      );
    };

    function handleGoogleSignIn(response) {

   
        const idToken = response.credential; 
        console.log(idToken);
        fetch("http://localhost:3000/users/google", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({ idToken }), 
        })
          .then((res) => res.json())
          .then((data) => {
            console.log(data);
            if (data.success) {
                res.status(200).json({ success: true});
            } else {
              const errorMessage = document.getElementById("error-message");
              errorMessage.style.display = "block";
              errorMessage.textContent = "Login with Google failed.";
            }
          })
          .catch((error) => {
            console.error("Error:", error);
          });
      } 
    
  </script>

</body>
</html>
